# Configuration for open-data workflows (Renewables Ninja + IRENA MSR)
# -------------------------------------------------------------------
# Countries for GAP/Ninja are human-readable names matching the Global Atlas
# Power Excel "Country/area" column. Countries for IRENA must match the SPLAT-
# style names used in the IRENA MSR CSVs under the "CtryName" column.

input_workflow_dir: input_workflow # relative to pre-analysis/
output_workflow_dir: output_workflow # relative to pre-analysis/

# Declare countries once and reuse below via YAML anchors
countries_common: &countries_common
  - Bosnia and Herzegovina
  - Croatia

gap:
  excel: dataset/Global-Integrated-Power-April-2025.xlsx
  countries: *countries_common
  tech_types: [solar, wind]
  output_dir: ""

climate_overview:
  enabled: true
  countries: *countries_common
  start_year: 2023
  end_year: 2025
  variables: [2m_temperature, total_precipitation]
  dataset: reanalysis-era5-land-monthly-means
  api_dir: ../prepare-data/input/era5_api
  extract_dir: ../prepare-data/input/era5_extract
  output_dir: climate
  download: false
  generate_plots: true
  save_netcdf: true

generation_map:
  enabled: true
  excel: dataset/Global-Integrated-Power-April-2025.xlsx
  sheet_name: Power facilities
  countries: *countries_common
  output_dir: ""
  map_filename: generation_map.html
  data_filename: generation_sites.csv
  summary_filename: generation_sites_summary.csv
  pgen_filename: pGenDataInput_gap.csv

rninja:
  start_year: 2015 # inclusive
  end_year: 2016 # exclusive
  local_time: true
  dataset: merra2
  capacity: 1
  system_loss: 0.1
  height: 100
  tracking: 0
  tilt: 35
  azim: 180
  turbine: Gamesa+G114+2000
  output_dir: "" # also used as input_dir for the Ninja workflow to align outputs

irena:
  countries: *countries_common
  input_dir: dataset
  output_dir: ""
  input_files:
    solar: SolarPV_BestMSRsToCover5%CountryArea.csv
    wind: Wind_BestMSRsToCover5%CountryArea.csv
  profile_year: 2023
  include_capacity_factors: true
  # Map IRENA CtryName -> geocoding-friendly name to make timezone lookups explicit.
  # Add entries when the CtryName string lacks spaces/accents used by the geocoder.
  country_name_map:
  timezone_map: {} # optional precomputed tz map

# Hourly load profile (Toktarova et al. 2019)
load_profile:
  countries: *countries_common
  dataset: dataset/Toktarova2019_paper_LongtermLoadProjectioninHighREsolutionforallCountriesGlobally_ElecPowerEnergySys_supplementary_7_load_all_2020.csv
  output_dir: ""
  year: 2020
  generate_heatmap_boxplot: true

# Representative days (prepare-data pipeline). Set enabled: true to run; point inputs to
# cleaned hourly CSVs with columns zone, month (or season), day, hour, and a value column.
representative_days:
  enabled: false # Flip to true to run the representative-days pipeline.
  seasons_map: # Month -> season regrouping used before clustering.
    {
      1: 2,
      2: 2,
      3: 2,
      4: 2,
      5: 1,
      6: 1,
      7: 1,
      8: 1,
      9: 1,
      10: 2,
      11: 2,
      12: 2,
    }
  input_files: {} # Hourly CSVs per tech (keys like PV/Wind/Load)
  # PV: ../prepare-data/representative_days/input/data_capp_solar.csv
  # Wind: ../prepare-data/representative_days/input/data_capp_wind.csv
  # Load: ../prepare-data/representative_days/input/data_load.csv
  output_dir: ../prepare-data/representative_days/output # Where repr_days/pHours/pVREProfile land.
  zones_to_exclude: [] # Optional list of zones to drop before processing.
  value_column: value # Override if the value column is not named "value".
  year_label: 2018 # Column name used for representative-year selection.
  n_representative_days: 2 # Number of representative days selected by the optimizer.
  n_clusters: 20 # KMeans clusters used to extract special/extreme days.
  n_bins: 10 # Number of bins passed to the GAMS model.
  feature_selection_count: null # If set (int), keep only N series via hierarchical selection.
  feature_selection_method: ward # Linkage method for feature selection.
  feature_selection_metric: euclidean # Distance metric for feature selection.
  feature_selection_scale: true # Scale features before feature selection.
  special_day_threshold: 0.1 # Probability cutoff for extracting special days.
  gams_main_file: ../prepare-data/representative_days/gams/OptimizationModelZone.gms # GAMS model path.
